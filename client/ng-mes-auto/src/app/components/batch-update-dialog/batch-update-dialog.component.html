<mat-toolbar class="title">
  <div class="dialog-title truncate" fxFlex>
    {{dialogTitle|translate}}
  </div>
  <button color="accent" mat-icon-button matDialogClose tabindex="-1" type="button">
    <mat-icon>close</mat-icon>
  </button>
</mat-toolbar>

<form [formGroup]="form" fxLayout="column" fxFlex>
  <mat-form-field floatLabel="always">
    <mat-select [formControl]="workshop" [placeholder]="'workshop'|translate" required [compareWith]="compareWithId">
      <mat-option *ngFor="let it of workshops$|async" [value]="it">
        {{it.name}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="workshop.hasError('required')">
      <span translate>Validator.required</span>
    </mat-error>
  </mat-form-field>

  <mat-form-field floatLabel="always">
    <mat-select [formControl]="product" [placeholder]="'product'|translate" required [compareWith]="compareWithId">
      <mat-option *ngFor="let it of product$|async" [value]="it">
        {{it.name}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="product.hasError('required')">
      <span translate>Validator.required</span>
    </mat-error>
  </mat-form-field>

  <mat-form-field floatLabel="always">
    <input matInput [formControl]="batchNo" required [placeholder]="'batchNo'|translate">
    <mat-error *ngIf="batchNo.hasError('required')">
      <span translate>Validator.required</span>
    </mat-error>
  </mat-form-field>

  <mat-form-field floatLabel="always">
    <input matInput [formControl]="spec" required [placeholder]="'Batch.spec'|translate">
    <mat-error *ngIf="spec.hasError('required')">
      <span translate>Validator.required</span>
    </mat-error>
  </mat-form-field>

  <mat-form-field floatLabel="always">
    <input matInput [formControl]="silkWeight" required [placeholder]="'silkWeight'|translate" type="number">
    <span matSuffix>KG</span>
    <mat-error *ngIf="silkWeight.hasError('required')">
      <span translate>Validator.required</span>
    </mat-error>
    <mat-error *ngIf="silkWeight.hasError('min')">
      <span translate [translateParams]="silkWeight.getError('min')">Validator.min</span>
    </mat-error>
  </mat-form-field>

  <mat-form-field floatLabel="always">
    <input matInput [formControl]="centralValue" required [placeholder]="'Batch.centralValue'|translate" type="number">
    <mat-error *ngIf="centralValue.hasError('required')">
      <span translate>Validator.required</span>
    </mat-error>
    <mat-error *ngIf="centralValue.hasError('min')">
      <span translate [translateParams]="centralValue.getError('min')">Validator.min</span>
    </mat-error>
  </mat-form-field>

  <mat-form-field floatLabel="always">
    <input matInput [formControl]="holeNum" required [placeholder]="'Batch.holeNum'|translate" type="number">
    <mat-error *ngIf="holeNum.hasError('required')">
      <span translate>Validator.required</span>
    </mat-error>
    <mat-error *ngIf="holeNum.hasError('min')">
      <span translate [translateParams]="holeNum.getError('min')">Validator.min</span>
    </mat-error>
  </mat-form-field>

  <mat-form-field floatLabel="always">
    <input matInput [formControl]="tubeColor" required [placeholder]="'tubeColor'|translate">
    <mat-error *ngIf="tubeColor.hasError('required')">
      <span translate>Validator.required</span>
    </mat-error>
  </mat-form-field>

  <mat-form-field floatLabel="always">
    <textarea matInput [formControl]="note" [placeholder]="'Common.note'|translate"></textarea>
  </mat-form-field>
</form>

<button type="button" (click)="submit()" mat-raised-button color="primary" [disabled]="form.pristine||form.invalid"
        fxFlex="none">
  {{'Common.finish'|translate}}
</button>
